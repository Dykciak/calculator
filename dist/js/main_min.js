var de,ac,dot,divide,seven,eight,nine,multiply,four,five,six,subtract,one,two,three,add,doubleZero,zero,equal,displayInput,operators=["+","-","*","/"],main=function(){prepareDOMElements(),prepareDOMEvents()},prepareDOMElements=function(){ac=document.querySelector(".clear"),de=document.querySelector(".delete"),dot=document.querySelector(".dot"),divide=document.querySelector(".divide"),seven=document.querySelector(".seven"),eight=document.querySelector(".eight"),nine=document.querySelector(".nine"),multiply=document.querySelector(".multiply"),four=document.querySelector(".four"),five=document.querySelector(".five"),six=document.querySelector(".six"),subtract=document.querySelector(".subtract"),one=document.querySelector(".one"),two=document.querySelector(".two"),three=document.querySelector(".three"),add=document.querySelector(".add"),doubleZero=document.querySelector(".doubleZero"),zero=document.querySelector(".zero"),equal=document.querySelector("#equal"),displayInput=document.querySelector(".display-input"),display=document.querySelector('input[name="display"]')},prepareDOMEvents=function(){ac.addEventListener("click",function(){return display.value=""}),de.addEventListener("click",function(){display.value=display.value.toString().slice(0,-1)}),dot.addEventListener("click",function(){return appendValue(".")}),divide.addEventListener("click",function(){return appendValue("/")}),seven.addEventListener("click",function(){return appendValue("7")}),eight.addEventListener("click",function(){return appendValue("8")}),nine.addEventListener("click",function(){return appendValue("9")}),multiply.addEventListener("click",function(){return appendValue("*")}),four.addEventListener("click",function(){return appendValue("4")}),five.addEventListener("click",function(){return appendValue("5")}),six.addEventListener("click",function(){return appendValue("6")}),subtract.addEventListener("click",function(){return appendValue("-")}),one.addEventListener("click",function(){return appendValue("1")}),two.addEventListener("click",function(){return appendValue("2")}),three.addEventListener("click",function(){return appendValue("3")}),add.addEventListener("click",function(){return appendValue("+")}),doubleZero.addEventListener("click",function(){return appendValue("00")}),zero.addEventListener("click",function(){return appendValue("0")}),equal.addEventListener("click",function(){calculate()}),document.addEventListener("keydown",handleKeyboardInput)},handleKeyboardInput=function(e){var n=e.key;isNaN(n)&&"."!==n?"Backspace"===n?display.value=display.value.toString().slice(0,-1):"Enter"===n?(e.preventDefault(),calculate()):"="===n?calculate():"+"===n||"-"===n||"*"===n||"/"===n?appendValue(n):"Escape"===n&&(display.value=""):appendValue(n)},appendValue=function(e){var n=display.value.slice(-1);if("."===e){var t=display.value.split(/[\+\-\*\/]/),t=t[t.length-1];if(""===n||operators.includes(n)||t.includes("."))return}operators.includes(e)&&(operators.includes(n)||"."===n)?display.value=display.value.slice(0,-1)+e:display.value+=e};function validateExpression(e){return/^(\d+(\.\d+)?)([+\-*/]\d+(\.\d+)?)*$/.test(e)}function calculate(){var expression=display.value;if(validateExpression(expression))try{display.value=eval(expression)}catch(e){display.value="Nieprawidłowe działanie"}else display.value="Nieprawidłowe działanie"}/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&document.querySelectorAll(".input-color").forEach(function(e){e.classList.add("ios-hover")}),document.addEventListener("DOMContentLoaded",main);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZGUiLCJhYyIsImRvdCIsImRpdmlkZSIsInNldmVuIiwiZWlnaHQiLCJuaW5lIiwibXVsdGlwbHkiLCJmb3VyIiwiZml2ZSIsInNpeCIsInN1YnRyYWN0Iiwib25lIiwidHdvIiwidGhyZWUiLCJhZGQiLCJkb3VibGVaZXJvIiwiemVybyIsImVxdWFsIiwib3BlcmF0b3JzIiwicHJlcGFyZURPTUVsZW1lbnRzIiwibWFpbiIsInByZXBhcmVET01FdmVudHMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJkaXNwbGF5SW5wdXQiLCJkaXNwbGF5IiwiYWRkRXZlbnRMaXN0ZW5lciIsInZhbHVlIiwidG9TdHJpbmciLCJzbGljZSIsImFwcGVuZFZhbHVlIiwiY2FsY3VsYXRlIiwiaGFuZGxlS2V5Ym9hcmRJbnB1dCIsImV2ZW50Iiwia2V5IiwiaXNOYU4iLCJwcmV2ZW50RGVmYXVsdCIsImxhc3RDaGFyIiwic3BsaXQiLCJsYXN0UGFydCIsInBhcnRzIiwibGVuZ3RoIiwiaW5jbHVkZXMiLCJleHByZXNzaW9uIiwidmFsaWRhdGVFeHByZXNzaW9uIiwidXNlckFnZW50Iiwid2luZG93IiwiTVNTdHJlYW0iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVsZW1lbnQiXSwibWFwcGluZ3MiOiJBQUFBLElBQUlBLEdBQ0FDLEdBREFELElBQ0FDLE9BQ0FDLE1BQ0FDLE1BQ0FDLEtBQ0FDLFNBQ0FDLEtBQ0FDLEtBQ0FDLElBQ0FDLFNBQ0FDLElBQ0FDLElBQ0FDLE1BQ0FDLElBQ0FDLFdBQ0FDLEtBQ0FDLE1BQ0FDLGFBQ0FDLFVBQUssQ0FBQSxJQUFBLElBQUEsSUFBQSxLQUVIQyxLQUFTLFdBRWZDLG1CQUFNQyxFQUVMQyxpQkFEQUYsQ0FFRCxFQUVNQSxtQkFBcUIsV0FDMUJuQixHQUFFc0IsU0FBV0MsY0FBYyxRQUFDLEVBQzVCeEIsR0FBRXVCLFNBQVdDLGNBQWMsU0FBQyxFQUM1QnRCLElBQUdxQixTQUFX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QkRGLFFBQUlQLE1BQVV3Qix5QkEyQmYsQ0FkQyxtQkFBa0JDLEtBQUFBLFVBQVdFLFNBQUEsR0FBQSxDQUFBQyxPQUFBQyxVQUM5QnpCLFNBQUEwQixpQkFBQSxjQUFBLEVBQUFDLFFBQUEsU0FBQUMsR0FFQUEsRUFBU25CLFVBQVNqQixJQUFHLFdBQUEsQ0F3QnBCLENBdkJBLEVBMEJEUSxTQXZCR0csaUJBQW9CLG1CQUFZTCxJQUFBIiwiZmlsZSI6Im1haW5fbWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IGRlO1xubGV0IGFjO1xubGV0IGRvdDtcbmxldCBkaXZpZGU7XG5sZXQgc2V2ZW47XG5sZXQgZWlnaHQ7XG5sZXQgbmluZTtcbmxldCBtdWx0aXBseTtcbmxldCBmb3VyO1xubGV0IGZpdmU7XG5sZXQgc2l4O1xubGV0IHN1YnRyYWN0O1xubGV0IG9uZTtcbmxldCB0d287XG5sZXQgdGhyZWU7XG5sZXQgYWRkO1xubGV0IGRvdWJsZVplcm87XG5sZXQgemVybztcbmxldCBlcXVhbDtcbmxldCBkaXNwbGF5SW5wdXQ7XG5jb25zdCBvcGVyYXRvcnMgPSBbXCIrXCIsIFwiLVwiLCBcIipcIiwgXCIvXCJdO1xuXG5jb25zdCBtYWluID0gKCkgPT4ge1xuXHRwcmVwYXJlRE9NRWxlbWVudHMoKTtcblx0cHJlcGFyZURPTUV2ZW50cygpO1xufTtcblxuY29uc3QgcHJlcGFyZURPTUVsZW1lbnRzID0gKCkgPT4ge1xuXHRhYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2xlYXJcIik7XG5cdGRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kZWxldGVcIik7XG5cdGRvdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZG90XCIpO1xuXHRkaXZpZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRpdmlkZVwiKTtcblx0c2V2ZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNldmVuXCIpO1xuXHRlaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWlnaHRcIik7XG5cdG5pbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5pbmVcIik7XG5cdG11bHRpcGx5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tdWx0aXBseVwiKTtcblx0Zm91ciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm91clwiKTtcblx0Zml2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZml2ZVwiKTtcblx0c2l4ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaXhcIik7XG5cdHN1YnRyYWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdWJ0cmFjdFwiKTtcblx0b25lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vbmVcIik7XG5cdHR3byA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudHdvXCIpO1xuXHR0aHJlZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGhyZWVcIik7XG5cdGFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkXCIpO1xuXHRkb3VibGVaZXJvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kb3VibGVaZXJvXCIpO1xuXHR6ZXJvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi56ZXJvXCIpO1xuXHRlcXVhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZXF1YWxcIik7XG5cdGRpc3BsYXlJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGlzcGxheS1pbnB1dFwiKTtcblx0ZGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJkaXNwbGF5XCJdJyk7XG59O1xuXG5jb25zdCBwcmVwYXJlRE9NRXZlbnRzID0gKCkgPT4ge1xuXHRhYy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gKGRpc3BsYXkudmFsdWUgPSBcIlwiKSk7XG5cdGRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG5cdFx0ZGlzcGxheS52YWx1ZSA9IGRpc3BsYXkudmFsdWUudG9TdHJpbmcoKS5zbGljZSgwLCAtMSk7XG5cdH0pO1xuXHRkb3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGFwcGVuZFZhbHVlKFwiLlwiKSk7XG5cdGRpdmlkZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gYXBwZW5kVmFsdWUoXCIvXCIpKTtcblx0c2V2ZW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGFwcGVuZFZhbHVlKFwiN1wiKSk7XG5cdGVpZ2h0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBhcHBlbmRWYWx1ZShcIjhcIikpO1xuXHRuaW5lLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBhcHBlbmRWYWx1ZShcIjlcIikpO1xuXHRtdWx0aXBseS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gYXBwZW5kVmFsdWUoXCIqXCIpKTtcblx0Zm91ci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gYXBwZW5kVmFsdWUoXCI0XCIpKTtcblx0Zml2ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gYXBwZW5kVmFsdWUoXCI1XCIpKTtcblx0c2l4LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBhcHBlbmRWYWx1ZShcIjZcIikpO1xuXHRzdWJ0cmFjdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gYXBwZW5kVmFsdWUoXCItXCIpKTtcblx0b25lLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBhcHBlbmRWYWx1ZShcIjFcIikpO1xuXHR0d28uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGFwcGVuZFZhbHVlKFwiMlwiKSk7XG5cdHRocmVlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBhcHBlbmRWYWx1ZShcIjNcIikpO1xuXHRhZGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGFwcGVuZFZhbHVlKFwiK1wiKSk7XG5cdGRvdWJsZVplcm8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGFwcGVuZFZhbHVlKFwiMDBcIikpO1xuXHR6ZXJvLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBhcHBlbmRWYWx1ZShcIjBcIikpO1xuXHRlcXVhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuXHRcdGNhbGN1bGF0ZSgpO1xuXHR9KTtcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlS2V5Ym9hcmRJbnB1dCk7XG59O1xuXG5jb25zdCBoYW5kbGVLZXlib2FyZElucHV0ID0gKGV2ZW50KSA9PiB7XG5cdGNvbnN0IGtleSA9IGV2ZW50LmtleTtcblx0aWYgKCFpc05hTihrZXkpIHx8IGtleSA9PT0gXCIuXCIpIHtcblx0XHRhcHBlbmRWYWx1ZShrZXkpO1xuXHR9IGVsc2UgaWYgKGtleSA9PT0gXCJCYWNrc3BhY2VcIikge1xuXHRcdGRpc3BsYXkudmFsdWUgPSBkaXNwbGF5LnZhbHVlLnRvU3RyaW5nKCkuc2xpY2UoMCwgLTEpO1xuXHR9IGVsc2UgaWYgKGtleSA9PT0gXCJFbnRlclwiKSB7XG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRjYWxjdWxhdGUoKTtcblx0fSBlbHNlIGlmIChrZXkgPT09IFwiPVwiKSB7XG5cdFx0Y2FsY3VsYXRlKCk7XG5cdH0gZWxzZSBpZiAoa2V5ID09PSBcIitcIiB8fCBrZXkgPT09IFwiLVwiIHx8IGtleSA9PT0gXCIqXCIgfHwga2V5ID09PSBcIi9cIikge1xuXHRcdGFwcGVuZFZhbHVlKGtleSk7XG5cdH0gZWxzZSBpZiAoa2V5ID09PSBcIkVzY2FwZVwiKSB7XG5cdFx0ZGlzcGxheS52YWx1ZSA9IFwiXCI7XG5cdH1cbn07XG5cbmNvbnN0IGFwcGVuZFZhbHVlID0gKHZhbHVlKSA9PiB7XG5cdGNvbnN0IGxhc3RDaGFyID0gZGlzcGxheS52YWx1ZS5zbGljZSgtMSk7XG5cdGlmICh2YWx1ZSA9PT0gXCIuXCIpIHtcblx0XHRjb25zdCBwYXJ0cyA9IGRpc3BsYXkudmFsdWUuc3BsaXQoL1tcXCtcXC1cXCpcXC9dLyk7IC8vIFNwbGl0IGJ5IG9wZXJhdG9yc1xuXHRcdGNvbnN0IGxhc3RQYXJ0ID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07XG5cblx0XHRpZiAoXG5cdFx0XHRsYXN0Q2hhciA9PT0gXCJcIiB8fFxuXHRcdFx0b3BlcmF0b3JzLmluY2x1ZGVzKGxhc3RDaGFyKSB8fFxuXHRcdFx0bGFzdFBhcnQuaW5jbHVkZXMoXCIuXCIpXG5cdFx0KSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHR9XG5cblx0aWYgKG9wZXJhdG9ycy5pbmNsdWRlcyh2YWx1ZSkpIHtcblx0XHRpZiAob3BlcmF0b3JzLmluY2x1ZGVzKGxhc3RDaGFyKSB8fCBsYXN0Q2hhciA9PT0gXCIuXCIpIHtcblx0XHRcdGRpc3BsYXkudmFsdWUgPSBkaXNwbGF5LnZhbHVlLnNsaWNlKDAsIC0xKSArIHZhbHVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkaXNwbGF5LnZhbHVlICs9IHZhbHVlO1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHRkaXNwbGF5LnZhbHVlICs9IHZhbHVlO1xuXHR9XG59O1xuXG5mdW5jdGlvbiB2YWxpZGF0ZUV4cHJlc3Npb24oZXhwcmVzc2lvbikge1xuXHRjb25zdCByZWdleCA9IC9eKFxcZCsoXFwuXFxkKyk/KShbK1xcLSovXVxcZCsoXFwuXFxkKyk/KSokLztcblx0cmV0dXJuIHJlZ2V4LnRlc3QoZXhwcmVzc2lvbik7XG59XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZSgpIHtcblx0Y29uc3QgZXhwcmVzc2lvbiA9IGRpc3BsYXkudmFsdWU7XG5cdGlmICh2YWxpZGF0ZUV4cHJlc3Npb24oZXhwcmVzc2lvbikpIHtcblx0XHR0cnkge1xuXHRcdFx0ZGlzcGxheS52YWx1ZSA9IGV2YWwoZXhwcmVzc2lvbik7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0ZGlzcGxheS52YWx1ZSA9IFwiTmllcHJhd2lkxYJvd2UgZHppYcWCYW5pZVwiO1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHRkaXNwbGF5LnZhbHVlID0gXCJOaWVwcmF3aWTFgm93ZSBkemlhxYJhbmllXCI7XG5cdH1cbn1cblxuLy8gZnVuY3Rpb24gY2FsY3VsYXRlMigpIHtcbi8vICAgICB0cnkge1xuLy8gICAgICAgICBkaXNwbGF5LnZhbHVlID0gZXZhbChkaXNwbGF5LnZhbHVlKTtcbi8vICAgICB9IGNhdGNoIChlKSB7XG4vLyAgICAgICAgIGFsZXJ0KCdJbnZhbGlkIEV4cHJlc3Npb24nKTtcbi8vICAgICB9XG4vLyB9XG5cbmlmICgvaVBhZHxpUGhvbmV8aVBvZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhd2luZG93Lk1TU3RyZWFtKSB7XG5cdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaW5wdXQtY29sb3JcIikuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuXHRcdGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImlvcy1ob3ZlclwiKTtcblx0fSk7XG59XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIG1haW4pO1xuIl19
